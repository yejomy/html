<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#b98cff" />
  <title>하루하나</title>
  <link rel="stylesheet" href="./css/style.css" />
</head>
<body>

  <!-- =========================
       LINE ICONS (NO EMOJI)
       ========================= -->
  <svg class="icon-sprite" width="0" height="0" style="position:absolute; left:-9999px; top:-9999px;" aria-hidden="true">
    <symbol id="i-logo" viewBox="0 0 24 24">
      <path d="M6 3.5h9.8a2.2 2.2 0 0 1 2.2 2.2v12.6a2.2 2.2 0 0 1-2.2 2.2H6A2.2 2.2 0 0 1 3.8 20.3V5.7A2.2 2.2 0 0 1 6 3.5z"
            fill="none" stroke="currentColor" stroke-width="1.7" stroke-linejoin="round"/>
      <path d="M7.2 7.2h7.6M7.2 10.4h6.3" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round"/>
      <path d="M13.7 15.2l5-5a1.5 1.5 0 0 1 2.1 2.1l-5 5-2.8.7.7-2.8z"
            fill="none" stroke="currentColor" stroke-width="1.7" stroke-linejoin="round"/>
    </symbol>

    <symbol id="i-search" viewBox="0 0 24 24">
      <circle cx="11" cy="11" r="6.6" fill="none" stroke="currentColor" stroke-width="1.8"/>
      <path d="M16.2 16.2L21 21" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
    </symbol>

    <symbol id="i-calendar" viewBox="0 0 24 24">
      <path d="M7 3.4v3M17 3.4v3" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
      <path d="M4.6 6.6h14.8A2.2 2.2 0 0 1 21.6 8.8v10.6a2.2 2.2 0 0 1-2.2 2.2H4.6a2.2 2.2 0 0 1-2.2-2.2V8.8a2.2 2.2 0 0 1 2.2-2.2z"
            fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
      <path d="M2.6 10h19" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
    </symbol>

    <symbol id="i-more" viewBox="0 0 24 24">
      <path d="M5.2 12h.01M12 12h.01M18.8 12h.01" fill="none" stroke="currentColor" stroke-width="4.2" stroke-linecap="round"/>
    </symbol>

    <symbol id="i-plus" viewBox="0 0 24 24">
      <path d="M12 5.2v13.6M5.2 12h13.6" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"/>
    </symbol>

    <symbol id="i-check" viewBox="0 0 24 24">
      <path d="M5 12.8l4 4L19 7" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
    </symbol>

    <symbol id="i-edit" viewBox="0 0 24 24">
      <path d="M4.2 19.8h4l11-11a2 2 0 0 0 0-2.9l-1.1-1.1a2 2 0 0 0-2.9 0l-11 11v4z"
            fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
      <path d="M13.5 6.5l4 4" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
    </symbol>

    <symbol id="i-trash" viewBox="0 0 24 24">
      <path d="M6 7h12" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
      <path d="M9 7V5.7A2.2 2.2 0 0 1 11.2 3.5h1.6A2.2 2.2 0 0 1 15 5.7V7"
            fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
      <path d="M7.4 7.2l.8 14a1.8 1.8 0 0 0 1.8 1.7h4a1.8 1.8 0 0 0 1.8-1.7l.8-14"
            fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
      <path d="M10.2 11v7M13.8 11v7" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
    </symbol>

    <symbol id="i-bell" viewBox="0 0 24 24">
      <path d="M18 16.5V11a6 6 0 0 0-12 0v5.5l-2 2h16l-2-2z"
            fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
      <path d="M9.2 18.5a2.8 2.8 0 0 0 5.6 0" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
    </symbol>

    <symbol id="i-repeat" viewBox="0 0 24 24">
      <path d="M7 7h10l-2-2M17 17H7l2 2" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M7 7a7 7 0 0 0 0 10M17 17a7 7 0 0 0 0-10" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
    </symbol>
  </svg>

  <div class="app">
    <!-- logo -->
     <div class="logo">
        <h1><a href="index.html"></a>하루하나</h1>
     </div>
    <!-- Top -->
    <header class="top">
      <div class="top-left">
        <div class="brand">
          <!-- <svg class="icon icon-logo" viewBox="0 0 24 24" aria-hidden="true"><use href="#i-logo"></use></svg> -->
          <div class="brand-text">
            <div class="brand-title">To do list</div>
            <div class="brand-sub">오늘할일</div>
          </div>
        </div>
        <div class="app-date" id="todayText"></div>
      </div>

      <div class="top-right">
        <div class="progress-pill" title="오늘 진행률">
          <div class="ring" id="ring" style="--p:0%">0%</div>
          <div class="progress-text">
            <div class="progress-sub">오늘</div>
            <div class="progress-main" id="statText">0/0</div>
          </div>
        </div>
      </div>
    </header>

    <!-- Search row -->
    <section class="row row-search">
      <div class="search">
        <svg class="icon icon-soft" viewBox="0 0 24 24" aria-hidden="true"><use href="#i-search"></use></svg>
        <input id="search" placeholder="검색" inputmode="search" />
      </div>

      <button class="pill-btn pill-icon" id="calendarBtn" type="button" aria-label="캘린더">
        <svg class="icon icon-soft" viewBox="0 0 24 24" aria-hidden="true"><use href="#i-calendar"></use></svg>
      </button>

      <button class="pill-btn" id="toggleFilters" type="button" aria-expanded="true" aria-controls="filters">
        <span class="mini-purple" aria-hidden="true"></span>
        필터
      </button>

      <button class="pill-btn pill-icon" id="moreBtn" type="button" aria-label="더보기">
        <svg class="icon icon-soft" viewBox="0 0 24 24" aria-hidden="true"><use href="#i-more"></use></svg>
      </button>
    </section>

    <!-- Tabs -->
    <section class="row">
      <div class="tabs" role="tablist" aria-label="보기">
        <button class="tab active" data-tab="today" type="button" role="tab" aria-selected="true">오늘</button>
        <button class="tab" data-tab="all" type="button" role="tab" aria-selected="false">전체</button>
        <button class="tab" data-tab="done" type="button" role="tab" aria-selected="false">완료</button>
      </div>
    </section>

    <!-- ✅ FILTERS: Custom gradient dropdowns -->
    <section class="row selects" id="filters" style="display:flex">
      <div class="dd" data-dd="sort">
        <button class="dd-btn" type="button" aria-haspopup="listbox" aria-expanded="false">
          <span class="dd-label" id="sortLabel">정렬: 스마트</span>
          <span class="dd-caret" aria-hidden="true">▾</span>
        </button>
        <div class="dd-menu" role="listbox">
          <button class="dd-item" type="button" role="option" data-value="smart">정렬: 스마트</button>
          <button class="dd-item" type="button" role="option" data-value="due">정렬: 마감일</button>
          <button class="dd-item" type="button" role="option" data-value="priority">정렬: 우선순위</button>
          <button class="dd-item" type="button" role="option" data-value="newest">정렬: 최신</button>
        </div>
      </div>

      <div class="dd" data-dd="prio">
        <button class="dd-btn" type="button" aria-haspopup="listbox" aria-expanded="false">
          <span class="dd-label" id="prioLabel">우선순위: 전체</span>
          <span class="dd-caret" aria-hidden="true">▾</span>
        </button>
        <div class="dd-menu" role="listbox">
          <button class="dd-item" type="button" role="option" data-value="">우선순위: 전체</button>
          <button class="dd-item" type="button" role="option" data-value="high">우선순위: 높음</button>
          <button class="dd-item" type="button" role="option" data-value="med">우선순위: 보통</button>
          <button class="dd-item" type="button" role="option" data-value="low">우선순위: 낮음</button>
        </div>
      </div>

      <div class="dd" data-dd="dueQuick">
        <button class="dd-btn" type="button" aria-haspopup="listbox" aria-expanded="false">
          <span class="dd-label" id="dueLabel">기한: 전체</span>
          <span class="dd-caret" aria-hidden="true">▾</span>
        </button>
        <div class="dd-menu" role="listbox">
          <button class="dd-item" type="button" role="option" data-value="">기한: 전체</button>
          <button class="dd-item" type="button" role="option" data-value="today">기한: 오늘</button>
          <button class="dd-item" type="button" role="option" data-value="tomorrow">기한: 내일</button>
          <button class="dd-item" type="button" role="option" data-value="overdue">기한: 지남</button>
          <button class="dd-item" type="button" role="option" data-value="none">기한: 없음</button>
        </div>
      </div>
    </section>

    <!-- List -->
    <main id="list" class="list"></main>

    <div class="tip">
     Tip: 아래 바에서 바로 추가 가능. 캘린더에서 “언제 무엇을 썼는지” 확인 가능.
    </div>
  </div>

  <!-- Bottom bar -->
  <div class="bottom-bar">
    <div class="bottom-inner">
      <div class="quickbox">
        <svg class="icon icon-soft" viewBox="0 0 24 24" aria-hidden="true"><use href="#i-plus"></use></svg>
        <input id="quickTitle" placeholder="할 일 추가..." />
      </div>
      <button class="add-btn" id="openSheet" type="button">추가</button>
    </div>
  </div>

  <!-- Sheet -->
  <div class="sheet-backdrop" id="backdrop" aria-hidden="true"></div>
  <div class="sheet" id="sheet" role="dialog" aria-modal="true" aria-labelledby="sheetTitle">
    <div class="grab" aria-hidden="true"></div>

    <div class="sheet-head">
      <div>
        <div class="sheet-title" id="sheetTitle">할 일 추가</div>
        <div class="sheet-sub" id="sheetDesc">제목/우선순위/마감일을 설정할 수 있어요.</div>
      </div>
      <button class="pill-btn pill-icon" id="closeSheet" type="button" aria-label="닫기">
        <svg class="icon icon-soft" viewBox="0 0 24 24" aria-hidden="true"><use href="#i-more"></use></svg>
      </button>
    </div>

    <form id="form" class="form">
      <div class="field">
        <label for="title">제목</label>
        <input id="title" type="text" placeholder="예: 운동 30분" maxlength="120" required />
      </div>

      <div class="grid">
        <div class="field">
          <label for="priority">우선순위</label>
          <select id="priority" class="sel">
            <option value="med">보통</option>
            <option value="high">높음</option>
            <option value="low">낮음</option>
          </select>
        </div>

        <div class="field">
          <label for="due">마감일</label>
          <input id="due" type="date" class="date" />
        </div>
      </div>

      <div class="grid">
        <div class="field">
          <label for="repeat">반복</label>
          <select id="repeat" class="sel">
            <option value="none">없음</option>
            <option value="daily">매일</option>
            <option value="weekly">매주</option>
          </select>
        </div>

        <div class="field">
          <label for="remind">리마인더</label>
          <div class="switch-row">
            <div class="switch-note">열려있을 때만</div>
            <div class="switch" id="remind" role="switch" aria-checked="false" tabindex="0"></div>
          </div>
        </div>
      </div>

      <div class="sheet-actions">
        <button type="submit" class="add-btn" style="flex:1">저장</button>
        <button type="button" class="pill-btn danger" id="deleteBtn" style="display:none">삭제</button>
      </div>
    </form>
  </div>

  <!-- Calendar -->
  <dialog id="calendarDialog" class="cal-dialog">
    <div class="cal-head">
      <div class="cal-title">캘린더</div>
      <button class="pill-btn pill-icon" id="calClose" type="button" aria-label="닫기">닫기</button>
    </div>

    <div class="cal-monthbar">
      <button class="pill-btn pill-icon" id="calPrev" type="button" aria-label="이전달">‹</button>
      <div class="cal-month" id="calMonthText"></div>
      <button class="pill-btn pill-icon" id="calNext" type="button" aria-label="다음달">›</button>
    </div>

    <div class="cal-weekdays">
      <div>일</div><div>월</div><div>화</div><div>수</div><div>목</div><div>금</div><div>토</div>
    </div>

    <div class="cal-grid" id="calGrid"></div>

    <div class="cal-log">
      <div class="cal-log-title" id="calLogTitle">날짜를 선택하세요</div>
      <div class="cal-log-list" id="calLogList"></div>
    </div>
  </dialog>

  <!-- More -->
  <dialog id="moreDialog" class="more-dialog">
    <div class="more-head">
      <div>
        <div class="more-title">더보기</div>
        <div class="more-sub">백업/복원, 알림 권한</div>
      </div>
      <button class="pill-btn" id="closeMore" type="button">닫기</button>
    </div>

    <div class="more-body">
      <button class="pill-btn" id="exportBtn" type="button">JSON 내보내기</button>
      <label class="pill-btn" for="importFile" style="cursor:pointer">JSON 가져오기</label>
      <input id="importFile" type="file" accept="application/json" class="sr-only" />

      <button class="pill-btn" id="notifyBtn" type="button">알림 권한 요청</button>
      <button class="pill-btn" id="testNotifyBtn" type="button">테스트 알림</button>

      <button class="pill-btn danger" id="clearDoneBtn" type="button">완료 항목 정리</button>
    </div>
  </dialog>

  <script src="./js/main.js"></script>
</body>
</html>
